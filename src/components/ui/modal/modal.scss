/* Generic modal skeleton & animations, with CSS vars for easy theming from the element */
.modal {
  /* Themeable vars (can be overridden on .modal or ancestors) */
  --modal-bg: #fff;
  --modal-fg: #111;
  --modal-radius: 12px;
  --modal-shadow: 0 10px 30px rgba(0,0,0,.25);
  --modal-border: 1px solid rgba(0,0,0,.08);

  --modal-header-bg: var(--modal-bg);
  --modal-footer-bg: var(--modal-bg);
  --modal-backdrop-bg: rgba(0,0,0,.45);

  --modal-gap: 16px;
  --modal-padding: 16px;

  position: fixed; inset: 0; z-index: 9999;
  display: grid; place-items: center;
  animation: modal-fade .12s ease-out;
}

.modal[data-align="top"] {
  align-items: start;
  padding-top: 5vh;
}

.modal__backdrop {
  position: absolute; inset: 0;
  background: var(--modal-backdrop-bg);
  backdrop-filter: blur(1.5px);
}
.modal__backdrop.is-transparent {
  background: rgba(0,0,0, .08);
  backdrop-filter: none;
}

.modal__panel {
  position: relative;
  color: var(--modal-fg);
  background: var(--modal-bg);
  border-radius: var(--modal-radius);
  box-shadow: var(--modal-shadow);
  overflow: hidden;
  display: flex; flex-direction: column;
  animation: modal-pop .16s cubic-bezier(.2,.8,.2,1);
  border: var(--modal-border);
  outline: none; /* focus handled by ring below */
}

.modal__panel:focus-visible {
  box-shadow:
    0 0 0 2px #fff,
    0 0 0 4px rgba(45, 140, 255, .6),
    var(--modal-shadow);
}

/* Sizes */
.modal__panel--sm { width: min(420px, 92vw); max-height: min(75vh, 92vh); }
.modal__panel--md { width: min(680px, 92vw); max-height: min(80vh, 92vh); }
.modal__panel--lg { width: min(880px, 92vw); max-height: min(85vh, 92vh); }
.modal__panel--xl { width: min(1100px, 96vw); max-height: min(90vh, 96vh); }

@media (max-width: 520px) {
  .modal__panel { width: 100vw; height: 100vh; max-height: 100vh; border-radius: 0; }
}

.modal__header {
  display: flex; align-items: center; gap: 12px;
  background: var(--modal-header-bg);
  padding: 14px 16px;
  border-bottom: 1px solid rgba(0,0,0,.06);
}

.modal__icon {
  display: grid; place-items: center;
  width: 28px; height: 28px;
}

.modal__titles {
  display: grid;
  gap: 2px;
  min-width: 0;
}

.modal__title {
  font-weight: 600;
  font-size: 16px;
  line-height: 1.25;
  margin: 0;
  color: var(--modal-fg);
  /* truncate if too long */
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}

.modal__subtitle {
  margin: 0;
  font-size: 12px;
  line-height: 1.2;
  color: rgba(0,0,0,.65);
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}

.modal__close {
  margin-left: auto;
  appearance: none;
  border: none;
  background: transparent;
  color: rgba(0,0,0,.7);
  width: 34px; height: 34px;
  border-radius: 8px;
  display: grid; place-items: center;
  cursor: pointer;
}
.modal__close:hover { background: rgba(0,0,0,.05); color: rgba(0,0,0,.85); }
.modal__close:active { transform: translateY(1px); }

.modal__body {
  padding: var(--modal-padding);
  overflow: auto;
  display: block;
}

.modal__footer {
  padding: 12px 16px;
  background: var(--modal-footer-bg);
  border-top: 1px solid rgba(0,0,0,.06);
  display: flex; align-items: center; justify-content: flex-end; gap: 8px;
}

/* Printing */
@media print { .modal { display: none !important; } }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .modal, .modal__panel { animation: none !important; }
}

/* Animations */
@keyframes modal-fade { from { opacity: 0 } to { opacity: 1 } }
@keyframes modal-pop  { from { opacity: 0; transform: translateY(8px) scale(.985) }
                        to   { opacity: 1; transform: translateY(0)  scale(1) } }
